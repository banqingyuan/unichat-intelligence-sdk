# AI动作数据结构

## Action 动作 [Atom, Program, Node]
AI当前支持多种原子的动作类型，比如原地动作，移动动作，舞蹈动作和UI动作等。
有时单一动作的执行可以比较好地满足用户需求，但是有时需要多种动作配合，才能够达到比较好的效果。

- Action Atom 是一个最小单元，代表了一个单一动作。它包含了具体的动作类型和允许配置的参数。
- Action Program 是动作组合编排，代表了多个动作的组合。形成一个有意义的行为。
- Action Node 是动作的执行单元，代表了一个动作的执行。它可以执行一个原子动作，也可以执行一个动作组合。

#### SHOWCASE:
喝水：由Atom组成的动作编排  
握住水杯-> 抬起水杯 -> 倾斜水杯 -> 喝水动作 -> 放下水杯 -> 松开水杯

## BluePrint 蓝图
由Action Program组合成的动作虽然具备了一定的复杂性，但表现出的仍然是一个比较简单的动作。  
蓝图具备了更高的复杂性，它可以描述AI在一段时间内的动作，去完成一段任务。 

BluePrint可以包含一些循环和条件判断，存在行为的分支。综合表现出一个经过设计的，有意义的行为。
蓝图包含了条件路由节点和动作节点。动作节点可以是一个原子动作，也可以是一个动作组合。
他们执行完毕后会指向下一个条件路由节点

**路由节点**  
    路由节点能力的三个递进步骤  
    1. 根据固定的已有条件，构造路由prompt，模板是固定的，参数是根据上下文组合的。因此用户不需要对Router进行任何配置。  
    2. 一方编辑工具，编写脚本进行路由。todo 需要进一步设计。在这一版本实现一个简单点的。  
    3. 用户设计，支持通过条件表达式控制路由。类似规则引擎  


#### SHOWCASE:
喝水：由蓝图组成的动作编排
```
if (水杯不存在) {
    不会执行蓝图
} elif (水杯在桌子上) {
    移动到桌子前 -> 执行喝水Program
} elif (水杯在面前) {
    执行喝水Program
} else {
    不会执行蓝图
}
```

## Trigger & Strategy
Trigger是在系统中预埋的可以允许AI产生反应的节点。  
Trigger的触发可以来自于用户的行为，也可以来自于系统的事件，还可以来自于LUI。即用户的口头命令。  
在Trigger被触发后，需要执行Trigger下绑定的Strategy。  

Strategy会判断当前的条件是否可以执行。这个判断也包含了多个Strategy之间的优先级竞争。  
每个strategy下都会绑定一个动作，它可以是一个蓝图，也可以是一个ActionNode.